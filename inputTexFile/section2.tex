\newpage
\section{前提知識}


%%%%%%%%%%%%%%%%%%%Android%%%%%%%%%%%%%%%%%%%%
\subsection{Android}
Androidとは、Googel社が2007年に開発したスマートフォンやタブレット端末など携帯情報機器向けのOperating System、あるいはAndroid OSが搭載された端末を指す。またAndroid OSが搭載された端末のことである。主にスマートフォンのOSとして広く普及しており、世界的にApple社の携帯機器向けiOSと市場を二分している。


%%%%%%%%%%%%%%%%%%%Operating System%%%%%%%%%%%%%%%%%%%%
\subsection{Operating System}
Operating System(以後OS)とは、ソフトウェアの種類の1つで、機器の基本的な管理や制御のための機能や、多くのソフトウェアが共通して利用する基本的な機能などを実装したシステム全体を管理するソフトウェアのことである。


%%%%%%%%%%%%%%%%%%%アプリ%%%%%%%%%%%%%%%%%%%%
\subsection{アプリ}
アプリとは、Application Softwareの略であり、ゲームや音楽プレイヤー、メールなど、スマートフォンのOS上で動くソフトウェアのことを言う。


%%%%%%%%%%%%%%%%%%%Androidアプリケーション%%%%%%%%%%%%%%%%%%%%
\subsection{Androidアプリケーション}
Androidアプリケーションとは、Androidにインストールすることのできるアプリである。
主に、JavaやKotlinというプログラミング言語で作成されている。Javaプログラムをコンパイルして機械語に変換し、
画像などのリソースと合わせてAPKというパッケージにすることで インストール可能である。


%%%%%%%%%%%%%%%%%%%APK%%%%%%%%%%%%%%%%%%%%
\subsection{APK}
APKとは、Android Application Packageの略であり、Android向けのアプリケーションをAndroid端末にインストールできる形式にパッケージにしたもの、もしくはそのファイルのことである。
入手方法は０００に後述するAPKストアからダウンロードする方法や、単体で公開されているAPKファイルをダウンロードする方法等が存在する。
一般的にAPKは“.apk”という拡張子を持つ。ただし、.apkファイル自体はzip形式で圧縮されており、その中にはアプリケーションの動作に必要なさまざまなファイルが納められている。
.apkファイルに対してzipファイルと同様の解凍処理を行い、得られるファイルのうち本研究に関連する項目を解説する。
\begin{itemize}
	\item  AndroidManifest.xml
		\begin{itemize}
			\item Androidアプリケーションの必要要件や、最初に起動されるアクティビティの記述がされている
			\item zipの解凍処理により得られるAndroifManifest.xmlはバイナリファイルの状態であるため、テキストエディタ等で内容を閲覧するためにはデコード処理が必要である
			\item デコードされたAndroidManifest.xmlの入手方法は後述する
		\end{itemize}
	\item classes.dex
		\begin{itemize}
			\item Android アプリケーションのソースファイルを変換してAndroidで実行できるようにしまとめたファイルである
			\item 1つのdexファイルに含められるメソッドの数は65,536が上限であり、それ以上の数のメソッドが1つのAndroidアプリケーションに含まれる場合は、classes2.dex、classes3.dex…と複数ファイルに分割される
		\end{itemize}
\end{itemize}


%%%%%%%%%%%%%%%%%%%バイナリファイル%%%%%%%%%%%%%%%%%%%%
\subsection{バイナリファイル}
バイナリファイルとは、コンピュータプログラムによって読み書きや処理を行うことを前提に、文字コードの規約を用いずに任意のビット列によって構成されるデータを格納するものである。
一方、テキストファイルは文字コードで規定された自然言語の文字と、表示制御のための少数の制御コード
%%（空白や改行など）
のみを含み、人間が容易に読み書きできる。
テキストファイルはテキストエディタなどで表示して中にどんな文字が書かれているかを読むことができるが、バイナリファイルはその形式に対応したソフトウェア以外ではまったく内容を知ることはできない。
ただし、バイナリエディタというソフトウェアによってどのようなバイト列が並んでいるかを見ることはできる。


%%%%%%%%%%%%%%%%%%%APKストア%%%%%%%%%%%%%%%%%%%%
\subsection{APKストア}
APKストアとは、Androidアプリケーション開発者の作成したAndroidアプリケーションの配信を代行するサービス、およびそれを行っているWebサイトのことである。Androidの公式APKストアは、Android の公式APKストアであるGooglePlay[ ]1つのみであり、非公式のAPKストアは数多く存在する。


%%%%%%%%%%%%%%%%%%%Android Developers%%%%%%%%%%%%%%%%%%%%
\subsection{Android Developers}
Android Developers とは、Android アプリケーション開発者向けのAndroid公式Webサイトのことである。Androidの詳細やドキュメントが提供されている。
公式ドキュメントといった場合Android Developersを指す。


%%%%%%%%%%%%%%%%%%%smaliファイル%%%%%%%%%%%%%%%%%%%%
\subsection{smaliファイル}
smaliとは、AndroidのDalvik仮想マシンで使用されるアセンブリ言語Smaliで書かれた開発者ファイルである。
通常、Androidアプリケーションに含まれている実行可能ファイルである。
DEX(Dalvik Executable)（Dalvik実行可能）ファイル（.apkファイル）を逆コンパイルすることによって作成される。
smaliファイルの取得には、Apktool[ ]を用いる方法と、baksmali[ ]を用いる方法がある。
それぞれのツールの詳細は０００で説明する。


%%%%%%%%%%%%%%%%%%%中間言語%%%%%%%%%%%%%%%%%%%%
\subsection{中間言語}
中間言語とは、計算機が実行するコードを人間が理解できる形式で表現するための言語である。
以下に本研究に関連するDalvikバイトコードについての詳細な説明を述べる。


%%%%%%%%%%%%%%%%%%%Dalvikバイトコード%%%%%%%%%%%%%%%%%%%%
\subsection{Dalvikバイトコード}
Dalvikバイトコードとは、Androidにおける中間言語である。Apktool等を用いてAPKより取得できるsmaliファイルは、Dalvikバイトコードで記述されている。以下に、ソースコード 1、ソースコード2にDalvikバイトコードの例と、対応するソースコードを示す。

\lstinputlisting[caption=対応するソースコード,label=BytecodeSample.java]{C:/Users/arier/Documents/卒論/yamaguchi_thesis-main/コード/BytecodeSample.java}
\lstinputlisting[caption=Dalvikバイトコードの例,label=BytecodeSample.smali]{C:/Users/arier/Documents/卒論/yamaguchi_thesis-main/コード/BytecodeSample.smali}


%%%%%%%%%%%%%%%%%%%Linux%%%%%%%%%%%%%%%%%%%
\subsection{Linux}

Linuxとは、WindowsやmacOSといったOSの1つである。CUIベースのOSであり、コマンドを実行することでPCを操作することが可能である。


%%%%%%%%%%%%%%%%%%%CUI%%%%%%%%%%%%%%%%%%%
\subsection{CUI}
CUIとは、Character User Interfaceの略であり、コンピュータやソフトウェアが利用者に情報を提示したり操作を受け付けたりする方法の1つで、
すべてのやり取りを文字によって行う方式のことである。


%%%%%%%%%%%%%%%%%%%Ubuntu%%%%%%%%%%%%%%%%%%%
\subsection{Ubuntu}
UbuntuはLinux系のOSの1つである。
このアプリは、CUIでファイル操作が可能である点や、シェルスプリクトを利用してsmaliファイルの解析をおこなえるため、本研究で利用した。


%%%%%%%%%%%%%%%%%%%シェル%%%%%%%%%%%%%%%%%%%
\subsection{シェル}
シェルとは、「オペレーティングシステムと対話するためのインターフェイス」であり、コマンドなどを制御する「環境」のことである。
シェルがあることでコマンドを受付、OSとの対話ができるようになる。CUI環境においてシェルは最も身近なインターフェイスである。


%%%%%%%%%%%%%%%%%%%UNIXコマンド%%%%%%%%%%%%%%%%%%%
\subsection{UNIXコマンド}
UNIXコマンドとは、Linux OS等のUNIXマシンにおいてCUI上からコンピュータを操作するために使用するコマンドのことを言う。ファイルのコピーを行うcp、ファイルの内容を表示するcat、ディレクトリの内容を表示するlsなどが存在する。


%%%%%%%%%%%%%%%%%%%シェルスプリクト%%%%%%%%%%%%%%%%%%%%
\subsection{シェルスプリクト}
シェルスプリクトとは、OSを操作するためのシェル上で実行できる簡易なプログラム言語（スプリクト言語）のことを言う。また、スプリクト言語によって書かれた、複数のOSコマンドや制御文などを組み合わせたプログラムを指す。
shコマンドの引数としてシェルスクリプトのファイルを与えて実行すると、ファイルに記述されたUNIXコマンドが上から順に実行される。以下のシェルスクリプトを実行すると、a.txtがb.txtにコピーされ、a.txtの末尾に“hoge”という文字列が追加される。
\lstinputlisting[caption=シェルスクリプトの例,label=ShellScriptSample.sh]{C:/Users/arier/Documents/卒論/yamaguchi_thesis-main/コード/ShellScriptSample.sh}


%%%%%%%%%%%%%%%%%%%暗号技術%%%%%%%%%%%%%%%%%%%%
\subsection{暗号技術}

\subsubsection {MD5}
MD5とは、Message Digest algorithm 5の略であり、ハッシュ値を計算するためのハッシュ関数のひとつである。RSA暗号の開発者のひとり、ロン・リベスト氏らによって開発された。IPsecや、POP before SMTPなど、さまざまなセキュリティープロトコルで使われている一方、最近になって脆弱性も指摘されている。生成された値は「ハッシュ値」(hash value)と呼ばれる。

\subsubsection {SHA-1}
SHA-1とは、アメリカ国家安全保障局が考案し、1995年から米国政府の標準として使用されているハッシュ関数である。任意のデータから160ビットのハッシュ値を生成する。
2017年、GoogleがSHA-1でハッシュ値が衝突する事例[]を発見したため、より安全なハッシュ関数を使用することが推奨されている。

\subsubsection{SHA-2}
SHA-2とは、SHA-1を改良したハッシュ関数である。バリエーション豊富であり以下を総称してSHA-2と呼ばれている。
\begin{itemize}
\item SHA-224（ハッシュ値：224bit）
\item SHA-256（ハッシュ値：256bit）
\item SHA-384（ハッシュ値：384bit）
\item SHA-512（ハッシュ値：512bit）
\item SHA-512/224（ハッシュ値：224bit）
\item SHA-512/256（ハッシュ値：256bit）
\end{itemize}
ベースはSHA-256とSHA-512である。
SHA-224はSHA-256で出力されたハッシュ値を224bitに切り詰めたものであり、SHA-384はSHA-512で出力されたハッシュ値を384bitに切り詰めたものである。
SHA-512/224とSHA512/256についてもSHA-512で出力されたハッシュ値を224bit、256bitに切り詰めたものである。
大きな違いとしては、SHA-256は32bitCPU、SHA-512は64bitCPUに最適化されている点がある。
ハッシュ長が長い方がセキュリティ的な強度が高いが、負荷が高くなる。
ただし、現状SHA-256でも必要十分な強度となっているため、一般的にはSHA-256が利用されている。


%%%%%%%%%%%%%%%%%%%API%%%%%%%%%%%%%%%%%%%
\subsection{API}
APIとは、Application Programming Interfaceの略であり、あるコンピュータプログラム（ソフトウェア）の機能や管理するデータなどを、外部の他のプログラムから呼び出して利用するための手順やデータ形式などを定めた規約である。
これは、3種類に分けられる。

\subsubsection {公式API}
公式APIとは、Androidの開発者向け公式WebサイトであるAndroid DevelopersのAPIリファレンスに記載されているAPIである。

\subsubsection {サードパーティー製API}
サードパーティー製APIとは、サードパーティが提供するAPIのことである。
サードパーティとは、特定のハードウェア、OS、ソフトウェア、あるいはサービスなどを対象として、
それに対応する製品を販売、提供している組織や企業のことを指す。
Google社のtinkやFacebook社のConcealnがある。

\subsubsection {独自実装等のAPI}
API開発者が既存のAPIを利用せずに独自に実装したAPIや、先述2つに含まれないものを独自実装等のAPIと本論文では呼ぶこととする。


%%%%%%%%%%%%%%%%%%%APIドキュメント%%%%%%%%%%%%%%%%%%%
\subsection{APIドキュメント}
APIドキュメントとは、APIによる開発方法やクラス内のメソッドの使用方法を解説した説明書である。
APIリファレンスとも呼ばれる。




























