\newpage

\section{調査対象と手法}
%%%%%%%%%%%%%%%%%%%%
\subsection {APKの取得}

APKにおいて利用されるAPIの調査対象としてAndroZooのデータセットよりAPKを411,486個用意し、APKをダウンロードした。
APKからsmaliファイルを展開する方法として、Apktoolを使用していた。
本研究でも、同じAPKを使用する。


AndroZooの参考文献

%%%%%%%%%%%%%%%%%%%%
\subsection{Android APIの分類}
APKに使われている暗号技術は大きく分けて3種類ある。

%%%%%%%%%%
　\subsubsection {公式API}

%if0
・Androidでは、ソフトウェア開発のために必要なプログラムやライブラリをGoogle社がAndroid SDKとして提供してる
・SDKで提供されるライブラリはAndroid開発者向けサイトAndroid DevelopersにAPIリファレンスとして記載されてる
・この研究ではここに記載されてるAPIを「公式API」と呼ぶことにするよ
%fi
Androidの開発者向け公式WebサイトであるAndroid DevelopersのAPIリファレンスに記載されているAPIのことを本研究では公式APIと呼ぶこととする。

%%%%%%%%%%
　\subsubsection {サードパーティー製API}
サードパーティー製APIとは、サードパーティが提供するAPIのことである。
サードパーティとは、特定のハードウェア、OS、ソフトウェア、あるいはサービスなどを対象として、
それに対応する製品を販売、提供している組織や企業のことを指す。
%if0
・AndroidにもサードパーティAPIが多くあるよ。
%fi

%%%%%%%%%%
　\subsubsection {独自実装等のAPI}
API開発者が既存のAPIを利用せずに独自に実装したAPIや、先述2つに含まれないものを独自実装等のAPIと本論文では呼ぶこととする。

%%%%%%%%%%%%%%%%%%%%
\subsection{APIの分析}
河合による先行研究では、公式APIから、暗号・セキュリティに関
するパッケージ、クラス、メソッドを抽出しリスト化を行った。
このリストをもとにAPKにおいてど
れほど暗号技術が利用されているかの分析を行った。

独自実装等のAPIはドキュメントが公開されている可能性
が低いためAPIのリスト化が困難である。これは、
RSAやECC、Cryptoといった暗号、セキュリティ
に関するキーワードをAPIのリストの代わりとし検
索する必要があるためAPKの網羅的調査を行う上
で困難である。

比較して、サードパーティー製API
ではドキュメントが公開されているものもあるので
リスト化の困難性が少ない。
サードパーティ製のAPIの分析ではまずAPIのリスト化を行う必要があるが、サードパーティー製
APIは公式APIとは違いドキュメントが作成され
ていないものがある。存在しない場合はサードパー
ティ製の APIのソースコードを解析し、APIのド
キュメントを作成してからAPIのリストの作成を行う。

独自実装等のAPIは今後の課題とする。

%%%%%%%%%%%%%%%%%%%%
\subsection{サードパーティ製APIの分析}

%%%%%%%%%%
\subsubsection{サードパーティ製API例}
どんなサードパーティ製APIが存在するのか紹介する。
\begin{itemize}
\item Tink　

Tinkは、Googleの暗号技術者とセキュリティエンジニアのグループが開発した、
多言語でクロスプラットフォームな暗号ライブラリである。

\item Conceal

Concealは、Facebookが開発したライブラリである。共通鍵暗号アルゴリズム AES(256bit)と暗号利用モードGCMを用いた暗号化処理を代行している。

\item　geduldig 

 
Geduldig は、Twitterが開発した
\end{itemize}
Tinkは、Android OSを提供しているGoogle社によるサードパーティ製APIであるため、Androidアプリケーション開発者にも利用されている可能性は高いと
考えられるため本研究の調査対象とする。


%%%%%%%%%%
\subsubsection{Tinkの分析}

Tinkは現在、それぞれのプリミティブを使って実装された、4つの暗号化操作を提供している。
\begin{itemize}
\item 関連データを備えた認証付き暗号(プリミティブ: AEAD)
\item メッセージ認証コード (プリミティブ: MAC)
\item ディジタル署名(プリミティブ: PublicKeySignとPublicKeyVerify)
\item ハイブリッド暗号化(プリミティブ: HybridEncryptとHybridDecrypt)
\end{itemize}
プリミティブとは、単純あるいは基本的な構造や要素のことを言う。
Tinkには、ドキュメントが存在するので、ドキュメントが存在しない
サードパーティ製APIよりリスト化の困難性が少ない。


\subsubsection{それぞれのプリミティブの詳しい説明いれるか迷っている}
暗号の説明をしていく。
\begin{itemize}
\item AEAD

AEADは、次の 3 つのアルゴリズムの組 AE = (AE-K, AE-E, AE-D) で定義される。

\item MAC

メッセージ認証コードMACは、Message Authentication Codeの略であり、ネットワークを通じて伝送されたメッセージが途中で改竄されていないかを確認することである。

\item PublicKeySignとPublicKeyVerify

\item HybridEncryptとHybridDecrypt

\end{itemize}
%%%%%%%%%%%%%%%%%%%%
\subsection{APIの取得方法}
Tinkのドキュメント\cite{Tink Cryptography}からAPIを抽出する。そのクラス（計167個）が持つ
メソッド計０００個のリスト化を行った。このリストは、2020年００月のものである。
リストの1部を抜粋し、表０に示す。リスト全体は付録Aに示す。


